<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 6.3.0"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png"><link rel="mask-icon" href="/images/logo.svg" color="#222"><meta name="google-site-verification" content="k9WS1EOfLnS9AypLcsMakrYfXwMf0dUn-t3o0ISNMy4"><meta name="baidu-site-verification" content="GTIjN6Pg5u"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha256-HtsXJanqjKTc8vVQjO4YMhiqFoXkfBsjBWcX91T1jr8=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css" integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin="anonymous"><script class="next-config" data-name="main" type="application/json">{"hostname":"blog.d77.xyz","root":"/","images":"/images","scheme":"Pisces","darkmode":false,"version":"8.16.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":{"enable":true,"style":null},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":true,"pangu":true,"comments":{"style":"tabs","active":"disqus","storage":true,"lazyload":true,"nav":null,"activeClass":"disqus"},"stickytabs":false,"motion":{"enable":false,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"æœç´¢...","empty":"æ²¡æœ‰æ‰¾åˆ°ä»»ä½•æœç´¢ç»“æœï¼š${query}","hits_time":"æ‰¾åˆ° ${hits} ä¸ªæœç´¢ç»“æœï¼ˆç”¨æ—¶ ${time} æ¯«ç§’ï¼‰","hits":"æ‰¾åˆ° ${hits} ä¸ªæœç´¢ç»“æœ"}}</script><script src="/js/config.js"></script><meta name="description" content="å‰è¨€æœ€è¿‘é¡¹ç›®ä¸­ä½¿ç”¨åˆ°äº† Redis ä¸­çš„ stream æ•°æ®ç±»å‹ä½œä¸ºæ¶ˆæ¯é˜Ÿåˆ—ä½¿ç”¨ï¼Œç›¸æ¯”äºå…¶ä»– redis å®ç°çš„æ¶ˆæ¯é˜Ÿåˆ—æ›´åŠ æ–¹ä¾¿ã€‚ç”±äºæ˜¯ç¬¬ä¸€æ¬¡ä½¿ç”¨ï¼Œè®°å½•ä¸‹çŸ¥è¯†ç‚¹ä»¥åå¤‡ç”¨ã€‚"><meta property="og:type" content="article"><meta property="og:title" content="redisçš„streamç±»å‹å‘½ä»¤è¯¦è§£"><meta property="og:url" content="https://blog.d77.xyz/archives/d1007463.html"><meta property="og:site_name" content="LLLibra146&#39;s blog"><meta property="og:description" content="å‰è¨€æœ€è¿‘é¡¹ç›®ä¸­ä½¿ç”¨åˆ°äº† Redis ä¸­çš„ stream æ•°æ®ç±»å‹ä½œä¸ºæ¶ˆæ¯é˜Ÿåˆ—ä½¿ç”¨ï¼Œç›¸æ¯”äºå…¶ä»– redis å®ç°çš„æ¶ˆæ¯é˜Ÿåˆ—æ›´åŠ æ–¹ä¾¿ã€‚ç”±äºæ˜¯ç¬¬ä¸€æ¬¡ä½¿ç”¨ï¼Œè®°å½•ä¸‹çŸ¥è¯†ç‚¹ä»¥åå¤‡ç”¨ã€‚"><meta property="og:locale" content="zh_CN"><meta property="article:published_time" content="2020-11-04T07:05:49.000Z"><meta property="article:modified_time" content="2023-05-23T03:24:35.536Z"><meta property="article:author" content="LLLibra146"><meta property="article:tag" content="redis"><meta property="article:tag" content="streamç±»å‹"><meta name="twitter:card" content="summary"><link rel="canonical" href="https://blog.d77.xyz/archives/d1007463.html"><script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"https://blog.d77.xyz/archives/d1007463.html","path":"/archives/d1007463.html","title":"redisçš„streamç±»å‹å‘½ä»¤è¯¦è§£"}</script><script class="next-config" data-name="calendar" type="application/json">""</script><title>redisçš„streamç±»å‹å‘½ä»¤è¯¦è§£ | LLLibra146's blog</title><script class="next-config" data-name="google_analytics" type="application/json">{"tracking_id":"G-GR9YXDQ843","only_pageview":true}</script><script src="/js/third-party/analytics/google-analytics.js"></script><script src="/js/third-party/analytics/baidu-analytics.js"></script><script async src="https://hm.baidu.com/hm.js?c76c7b91ebcbf02b7fc1f26bf23121ff"></script><noscript><link rel="stylesheet" href="/css/noscript.css"></noscript></head><body itemscope itemtype="http://schema.org/WebPage"><div class="headband"></div><main class="main"><div class="column"><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="åˆ‡æ¢å¯¼èˆªæ " role="button"><span class="toggle-line"></span> <span class="toggle-line"></span> <span class="toggle-line"></span></div></div><div class="site-meta"><a href="/" class="brand" rel="start"><i class="logo-line"></i><p class="site-title">LLLibra146's blog</p><i class="logo-line"></i></a><p class="site-subtitle" itemprop="description">Personal note</p></div><div class="site-nav-right"><div class="toggle popup-trigger" aria-label="æœç´¢" role="button"></div></div></div><nav class="site-nav"><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>é¦–é¡µ</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>å…³äº</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>æ ‡ç­¾<span class="badge">157</span></a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>åˆ†ç±»<span class="badge">29</span></a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>å½’æ¡£<span class="badge">64</span></a></li></ul></nav></header><aside class="sidebar"><div class="sidebar-inner sidebar-nav-active sidebar-toc-active"><ul class="sidebar-nav"><li class="sidebar-nav-toc">æ–‡ç« ç›®å½•</li><li class="sidebar-nav-overview">ç«™ç‚¹æ¦‚è§ˆ</li></ul><div class="sidebar-panel-container"><div class="post-toc-wrap sidebar-panel"><div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%89%8D%E8%A8%80"><span class="nav-number">1.</span> <span class="nav-text">å‰è¨€</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Stream%E7%B1%BB%E5%9E%8B"><span class="nav-number">2.</span> <span class="nav-text">Streamç±»å‹</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#stream%E7%B1%BB%E5%9E%8B%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="nav-number">3.</span> <span class="nav-text">streamç±»å‹çš„ä½¿ç”¨</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#xadd%E5%91%BD%E4%BB%A4"><span class="nav-number">3.1.</span> <span class="nav-text">xaddå‘½ä»¤</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#xread%E5%91%BD%E4%BB%A4"><span class="nav-number">3.2.</span> <span class="nav-text">xreadå‘½ä»¤</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#xlen%E5%91%BD%E4%BB%A4"><span class="nav-number">3.3.</span> <span class="nav-text">xlenå‘½ä»¤</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#xrange%E5%91%BD%E4%BB%A4"><span class="nav-number">3.4.</span> <span class="nav-text">xrangeå‘½ä»¤</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#xrevrange%E5%91%BD%E4%BB%A4"><span class="nav-number">3.5.</span> <span class="nav-text">xrevrangeå‘½ä»¤</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#xtrim%E5%91%BD%E4%BB%A4"><span class="nav-number">3.6.</span> <span class="nav-text">xtrimå‘½ä»¤</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#xdel%E5%91%BD%E4%BB%A4"><span class="nav-number">3.7.</span> <span class="nav-text">xdelå‘½ä»¤</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#xgroup%E5%91%BD%E4%BB%A4"><span class="nav-number">3.8.</span> <span class="nav-text">xgroupå‘½ä»¤</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#xinfo%E5%91%BD%E4%BB%A4"><span class="nav-number">3.9.</span> <span class="nav-text">xinfoå‘½ä»¤</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#xpending%E5%91%BD%E4%BB%A4"><span class="nav-number">3.10.</span> <span class="nav-text">xpendingå‘½ä»¤</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#xreadgroup%E5%91%BD%E4%BB%A4"><span class="nav-number">3.11.</span> <span class="nav-text">xreadgroupå‘½ä»¤</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#xack%E5%91%BD%E4%BB%A4"><span class="nav-number">3.12.</span> <span class="nav-text">xackå‘½ä»¤</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#xclaim%E5%91%BD%E4%BB%A4"><span class="nav-number">3.13.</span> <span class="nav-text">xclaimå‘½ä»¤</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%80%BB%E7%BB%93"><span class="nav-number">4.</span> <span class="nav-text">æ€»ç»“</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8F%82%E8%80%83%E9%93%BE%E6%8E%A5"><span class="nav-number">5.</span> <span class="nav-text">å‚è€ƒé“¾æ¥</span></a></li></ol></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="site-author-image" itemprop="image" alt="LLLibra146" src="https://blogimg1.oss-cn-hangzhou.aliyuncs.com/img/logo.png"><p class="site-author-name" itemprop="name">LLLibra146</p><div class="site-description" itemprop="description">å°æ—¶ä¾¯ï¼Œå¹¸ç¦æ˜¯å¾ˆç®€å•çš„äº‹ï¼›é•¿å¤§äº†ï¼Œç®€å•æ˜¯å¾ˆå¹¸ç¦çš„äº‹ï¼</div></div><div class="site-state-wrap animated"><nav class="site-state"><div class="site-state-item site-state-posts"><a href="/archives/"><span class="site-state-item-count">64</span> <span class="site-state-item-name">æ—¥å¿—</span></a></div><div class="site-state-item site-state-categories"><a href="/categories/"><span class="site-state-item-count">29</span> <span class="site-state-item-name">åˆ†ç±»</span></a></div><div class="site-state-item site-state-tags"><a href="/tags/"><span class="site-state-item-count">157</span> <span class="site-state-item-name">æ ‡ç­¾</span></a></div></nav></div><div class="links-of-author animated"><span class="links-of-author-item"><a href="https://github.com/libra146" title="GitHub â†’ https:&#x2F;&#x2F;github.com&#x2F;libra146" rel="noopener me" target="_blank"><i class="github fa-fw"></i>GitHub</a> </span><span class="links-of-author-item"><a href="mailto:1462326016@qq.com" title="E-Mail â†’ mailto:1462326016@qq.com" rel="noopener me" target="_blank"><i class="envelope fa-fw"></i>E-Mail</a></span></div></div></div></div></aside></div><div class="main-inner post posts-expand"><div class="post-block"><article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://blog.d77.xyz/archives/d1007463.html"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="https://blogimg1.oss-cn-hangzhou.aliyuncs.com/img/logo.png"><meta itemprop="name" content="LLLibra146"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="LLLibra146's blog"><meta itemprop="description" content="å°æ—¶ä¾¯ï¼Œå¹¸ç¦æ˜¯å¾ˆç®€å•çš„äº‹ï¼›é•¿å¤§äº†ï¼Œç®€å•æ˜¯å¾ˆå¹¸ç¦çš„äº‹ï¼"></span><span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork"><meta itemprop="name" content="redisçš„streamç±»å‹å‘½ä»¤è¯¦è§£ | LLLibra146's blog"><meta itemprop="description" content=""></span><header class="post-header"><h1 class="post-title" itemprop="name headline">redisçš„streamç±»å‹å‘½ä»¤è¯¦è§£</h1><div class="post-meta-container"><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">å‘è¡¨äº</span> <time title="åˆ›å»ºæ—¶é—´ï¼š2020-11-04 15:05:49" itemprop="dateCreated datePublished" datetime="2020-11-04T15:05:49+08:00">2020-11-04</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">æ›´æ–°äº</span> <time title="ä¿®æ”¹æ—¶é—´ï¼š2023-05-23 11:24:35" itemprop="dateModified" datetime="2023-05-23T11:24:35+08:00">2023-05-23</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">åˆ†ç±»äº</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Redis/" itemprop="url" rel="index"><span itemprop="name">Redis</span></a></span></span></div></div></header><div class="post-body" itemprop="articleBody"><h3 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h3><p>æœ€è¿‘é¡¹ç›®ä¸­ä½¿ç”¨åˆ°äº† Redis ä¸­çš„ stream æ•°æ®ç±»å‹ä½œä¸ºæ¶ˆæ¯é˜Ÿåˆ—ä½¿ç”¨ï¼Œç›¸æ¯”äºå…¶ä»– redis å®ç°çš„æ¶ˆæ¯é˜Ÿåˆ—æ›´åŠ æ–¹ä¾¿ã€‚ç”±äºæ˜¯ç¬¬ä¸€æ¬¡ä½¿ç”¨ï¼Œè®°å½•ä¸‹çŸ¥è¯†ç‚¹ä»¥åå¤‡ç”¨ã€‚</p><span id="more"></span><h3 id="Streamç±»å‹"><a href="#Streamç±»å‹" class="headerlink" title="Streamç±»å‹"></a>Streamç±»å‹</h3><p>åŸºäº redis çš„æ¶ˆæ¯é˜Ÿåˆ—æœ‰å¥½å¤šç§å®ç°ï¼Œä½†æ˜¯å¤§å¤šéƒ½æœ‰å…¶ç‰¹ç‚¹å’Œé—®é¢˜ï¼Œæœ¬èº« redis åªæ˜¯ä¸ªç¼“å­˜å•ŠğŸ˜‚ï¼Œä¼°è®¡å®˜æ–¹éƒ½çœ‹ä¸ä¸‹å»äº†ï¼Œè¿™æ‰åœ¨ redis 5.0 é‡ŒåŠ äº†ä¸€ç§æ•°æ®ç±»å‹ä¸“é—¨ç”¨æ¥å®ç°å…¸å‹çš„æ¶ˆæ¯é˜Ÿåˆ—ã€‚</p><p>stream ç±»å‹å‡ ä¹å…·å¤‡äº†ä¸€ä¸ªæ¶ˆæ¯é˜Ÿåˆ—æ‰€éœ€è¦ç”¨åˆ°çš„æ‰€æœ‰åŠŸèƒ½ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºï¼š</p><ul><li>æ¶ˆæ¯ ID çš„åºåˆ—åŒ–ç”Ÿæˆ</li><li>æ¶ˆæ¯éå†</li><li>å¤„ç†æœªç¡®è®¤çš„æ¶ˆæ¯</li><li>æ¶ˆæ¯çš„é˜»å¡å’Œéé˜»å¡è¯»å–</li><li>æ¶ˆæ¯çš„åˆ†ç»„æ¶ˆè´¹</li><li>æ¶ˆæ¯é˜Ÿåˆ—ç›‘æ§</li></ul><p>ç­‰ç­‰â€¦.</p><p>ä¸‹é¢ä»‹ç» stream æ•°æ®ç±»å‹çš„ä½¿ç”¨æ–¹æ³•ã€‚</p><h3 id="streamç±»å‹çš„ä½¿ç”¨"><a href="#streamç±»å‹çš„ä½¿ç”¨" class="headerlink" title="streamç±»å‹çš„ä½¿ç”¨"></a>streamç±»å‹çš„ä½¿ç”¨</h3><h4 id="xaddå‘½ä»¤"><a href="#xaddå‘½ä»¤" class="headerlink" title="xaddå‘½ä»¤"></a>xaddå‘½ä»¤</h4><p>è¯­æ³•æ ¼å¼ä¸ºï¼š</p><blockquote><p>XADD key ID field value [field value â€¦]</p><ul><li>keyï¼Œç”¨æ¥æŒ‡å®š stream çš„åå­—</li><li>IDï¼Œç”¨æ¥æŒ‡å®š ID å€¼ï¼Œæœ€å¸¸ç”¨çš„æ˜¯ *</li><li>field value [field value â€¦]ï¼Œkey-valueç±»å‹æ•°æ®</li></ul></blockquote><p>xadd ç”¨æ¥åœ¨æŒ‡å®šçš„ key ä¸­æ·»åŠ æ¶ˆæ¯ï¼Œå¦‚æœ key ä¸å­˜åœ¨ï¼Œåˆ™è‡ªåŠ¨åˆ›å»ºã€‚æ·»åŠ çš„æ¶ˆæ¯ä¸º <code>key-value</code> ç±»å‹ï¼Œå¯ä»¥ä¸€æ¬¡æ·»åŠ å¤šä¸ªæ¶ˆæ¯ã€‚</p><p>æŒ‡å®š IDï¼Œæœ€å¸¸ç”¨çš„æ˜¯ *ï¼Œè¡¨ç¤ºç”± redis è‡ªåŠ¨ç”Ÿæˆ IDï¼Œè‡ªåŠ¨ç”Ÿæˆçš„ ID ä¸º <code>1526919030474-55</code> æ ¼å¼ï¼Œç”±æ¯«ç§’æ—¶é—´æˆ³å’Œåºåˆ—å·ç»„æˆï¼Œåºåˆ—å·ç”¨äºåŒºåˆ†åŒä¸€æ¯«ç§’å†…ç”Ÿæˆçš„æ¶ˆæ¯ï¼Œä¿è¯ ID å§‹ç»ˆæ˜¯é€’å¢çš„ã€‚å¦‚æœç”±äºä¸€äº›å…¶ä»–åŸå› ç³»ç»Ÿæ—¶é’Ÿæ…¢äº†ï¼Œå¯¼è‡´ç”Ÿæˆçš„æ—¶é—´æˆ³å°äºäº† redis ä¸­è®°å½•çš„å€¼ï¼Œåˆ™ä¼šå–ç³»ç»Ÿä¸­è®°å½•çš„æœ€å¤§å€¼ç»§ç»­é€’å¢ï¼Œä¿è¯ ID çš„é€’å¢çŠ¶æ€ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; xadd message 1 key1 value1 key2 value2</span><br><span class="line"><span class="string">&quot;1-0&quot;</span></span><br><span class="line">127.0.0.1:6379&gt; xadd message 1-2 key1 value1 key2 value2</span><br><span class="line"><span class="string">&quot;1-2&quot;</span></span><br></pre></td></tr></table></figure><p>ID åœ¨ä¸€èˆ¬æƒ…å†µä¸‹æ˜¯ç”± redis è‡ªåŠ¨æŒ‡å®šçš„ï¼Œä½†å…¶å® ID ä¹Ÿæ˜¯å¯ä»¥è‡ªå®šä¹‰çš„ï¼Œä¸ºäº†ä¿è¯ ID çš„è‡ªå¢çŠ¶æ€ï¼Œæ‰‹åŠ¨æŒ‡å®šçš„ ID å¿…é¡»è¦å¤§äºç³»ç»Ÿä¸­å­˜åœ¨çš„ IDï¼Œåªä¸è¿‡ä¸€èˆ¬ä¸è¿™ä¹ˆåšã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; xadd message * key1 value1 key2 value2</span><br><span class="line"><span class="string">&quot;1604475735664-0&quot;</span></span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šå‘½ä»¤æ·»åŠ äº† key1-value å’Œ key2-value2 ä¸¤æ¡æ¶ˆæ¯åˆ° message è¿™ä¸ª key ä¸­ï¼Œè¿”å›å€¼ä¸ºå½“å‰æ¶ˆæ¯çš„ IDï¼Œç”± redis è‡ªåŠ¨ç”Ÿæˆï¼Œæ­¤æ—¶æ¶ˆæ¯é˜Ÿåˆ—ä¸­å°±æœ‰ä¸€æ¡æ¶ˆæ¯å¯ä»¥è¢«è¯»å–äº†ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; xadd message maxlen 10 * key3 value3</span><br><span class="line"><span class="string">&quot;1604476672762-0&quot;</span></span><br></pre></td></tr></table></figure><p>maxlen å‚æ•°ç”¨æ¥é™åˆ¶ key ä¸­æ¶ˆæ¯çš„æœ€å¤§æ•°é‡ï¼Œä½†æ˜¯ç²¾ç¡®é™åˆ¶ key ä¸­æ¶ˆæ¯çš„æ•°é‡æ˜¯ä½æ•ˆçš„ï¼Œå¯ä»¥ä½¿ç”¨ <code>~</code> ç¬¦å·ç²—ç•¥çš„é™åˆ¶ key ä¸­æ¶ˆæ¯çš„æ•°é‡ï¼Œredis ä¼šåœ¨å¯ä»¥åˆ é™¤æ•´ä¸ªå®ç»“ç‚¹æ—¶æ‰å»åˆ é™¤å¤šä½™çš„æ¶ˆæ¯ï¼Œå®é™…æ•°é‡å¯èƒ½ä¼šæ¯”é™åˆ¶æ•°é‡å¤šå‡ åä¸ªï¼Œè¿™æ˜¯æ­£å¸¸çš„ï¼Œä½†æ˜¯ä¸ä¼šå°‘äºé™åˆ¶çš„æ•°é‡ã€‚</p><h4 id="xreadå‘½ä»¤"><a href="#xreadå‘½ä»¤" class="headerlink" title="xreadå‘½ä»¤"></a>xreadå‘½ä»¤</h4><p>è¯­æ³•æ ¼å¼ä¸ºï¼š</p><blockquote><p>XREAD [COUNT count] [BLOCK milliseconds] STREAMS key [key â€¦] id [id â€¦]</p><ul><li>[COUNT count]ï¼Œç”¨æ¥è·å–æ¶ˆæ¯çš„æ•°é‡</li><li>[BLOCK milliseconds]ï¼Œç”¨æ¥è®¾ç½®é˜»å¡æ¨¡å¼å’Œé˜»å¡è¶…æ—¶æ—¶é—´ï¼Œé»˜è®¤ä¸ºéé˜»å¡</li><li>id [id â€¦]ï¼Œç”¨æ¥è®¾ç½®è¯»å–çš„èµ·å§‹ IDï¼Œç›¸å½“äº where id &gt; $idï¼Œé˜»å¡æ¨¡å¼ä¸­å¯ä»¥ä½¿ç”¨ $ æ¥è·å–æœ€æ–°çš„æ¶ˆæ¯ IDï¼Œéé˜»å¡æ¨¡å¼ä¸‹æ— æ„ä¹‰ã€‚</li><li>keyï¼ŒæŒ‡å®š stream çš„åå­—</li></ul></blockquote><p>xread å‘½ä»¤ç”¨äºä»ä¸€ä¸ªæˆ–å¤šä¸ª key ä¸­è¯»å–æ¶ˆæ¯ï¼Œä»…è¿”å› ID å€¼å¤§äºå‚æ•°ä¸­ä¼ å…¥çš„ ID çš„æ¶ˆæ¯ã€‚æ­¤å‘½ä»¤æœ‰é˜»å¡ç”¨æ³•å’Œéé˜»å¡ç”¨æ³•ï¼Œå¦‚æœ key ä¸­æ²¡æœ‰æ¶ˆæ¯ï¼Œåˆ™è¿”å›ç©ºã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; xread streams message 0</span><br><span class="line">1) 1) <span class="string">&quot;message&quot;</span></span><br><span class="line">   2) 1) 1) <span class="string">&quot;1-0&quot;</span></span><br><span class="line">         2) 1) <span class="string">&quot;key1&quot;</span></span><br><span class="line">            2) <span class="string">&quot;value1&quot;</span></span><br><span class="line">            3) <span class="string">&quot;key2&quot;</span></span><br><span class="line">            4) <span class="string">&quot;value2&quot;</span></span><br><span class="line">      2) 1) <span class="string">&quot;1-2&quot;</span></span><br><span class="line">         2) 1) <span class="string">&quot;key1&quot;</span></span><br><span class="line">            2) <span class="string">&quot;value1&quot;</span></span><br><span class="line">            3) <span class="string">&quot;key2&quot;</span></span><br><span class="line">            4) <span class="string">&quot;value2&quot;</span></span><br><span class="line">      3) 1) <span class="string">&quot;1604476672762-0&quot;</span></span><br><span class="line">         2) 1) <span class="string">&quot;key3&quot;</span></span><br><span class="line">            2) <span class="string">&quot;value3&quot;</span></span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šå‘½ä»¤åœ¨éé˜»å¡æ¨¡å¼è¾“å‡ºäº†æ‰€æœ‰çš„æ¶ˆæ¯ï¼Œå› ä¸ºä¸å­˜åœ¨ ID æ¯” 0 è¿˜å°çš„æ¶ˆæ¯ï¼Œæ‰€ä»¥è¾“å‡ºäº†æ‰€æœ‰çš„æ¶ˆæ¯ã€‚</p><p>é˜»å¡æ¨¡å¼ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ $ ç¬¦å·æ¥è·å–æœ€æ–°çš„æ¶ˆæ¯ã€‚å¦‚æœåœ¨æŒ‡å®šè¶…æ—¶æ—¶é—´å†…æ²¡æœ‰æ–°çš„æ¶ˆæ¯ï¼Œåˆ™è¿”å›ç©ºã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; xread count 10 block 10000 streams message $</span><br><span class="line">(nil)</span><br><span class="line">(10.02s)</span><br><span class="line">127.0.0.1:6379&gt; xread count 10 block 10000 streams message $</span><br><span class="line">1) 1) <span class="string">&quot;message&quot;</span></span><br><span class="line">   2) 1) 1) <span class="string">&quot;1604478070071-0&quot;</span></span><br><span class="line">         2) 1) <span class="string">&quot;keyblock2&quot;</span></span><br><span class="line">            2) <span class="string">&quot;value&quot;</span></span><br><span class="line">(5.00s)</span><br></pre></td></tr></table></figure><p>è¾“å…¥å‘½ä»¤åï¼Œå¯ä»¥è§‚å¯Ÿåˆ°å‘½ä»¤æ²¡æœ‰ä»»ä½•è¾“å‡ºï¼Œæ­¤æ—¶æ–°å¼€ä¸€ä¸ª redis-cliï¼Œè¾“å…¥ <code>xadd message * keyblock2 value</code> å°†ä¸€æ¡æ–°çš„æ¶ˆæ¯æ·»åŠ åˆ° key ä¸­ï¼Œå¯ä»¥çœ‹åˆ°ä¸Šé¢çš„å‘½ä»¤è¿”å›äº†åˆšæ‰æ·»åŠ çš„å€¼å’Œé˜»å¡æ—¶é—´ã€‚</p><h4 id="xlenå‘½ä»¤"><a href="#xlenå‘½ä»¤" class="headerlink" title="xlenå‘½ä»¤"></a>xlenå‘½ä»¤</h4><p>è¯­æ³•æ ¼å¼ï¼š</p><blockquote><p>XLEN key</p></blockquote><p>è¿”å› key ä¸­æ¶ˆæ¯çš„æ•°é‡ï¼Œå¦‚æœ key ä¸å­˜åœ¨ï¼Œåˆ™ä¼šè¿”å› 0ã€‚å³ä½¿ key ä¸­æ¶ˆæ¯çš„æ•°é‡ä¸º 0ï¼Œkey ä¹Ÿä¸ä¼šè¢«è‡ªåŠ¨åˆ é™¤ï¼Œå› ä¸ºå¯èƒ½è¿˜å­˜åœ¨å’Œ key å…³è”çš„æ¶ˆè´¹è€…ç»„ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; xlen message</span><br><span class="line">(<span class="built_in">integer</span>) 5</span><br></pre></td></tr></table></figure><p>è¿”å› message ä¸­æ‰€æœ‰æ¶ˆæ¯çš„æ•°é‡ã€‚</p><h4 id="xrangeå‘½ä»¤"><a href="#xrangeå‘½ä»¤" class="headerlink" title="xrangeå‘½ä»¤"></a>xrangeå‘½ä»¤</h4><p>è¯­æ³•å¦‚ä¸‹ï¼š</p><blockquote><p>XRANGE key start end [COUNT count]</p><ul><li>keyï¼ŒæŒ‡å®š stream çš„åå­—</li><li>startï¼Œèµ·å§‹ ID</li><li>endï¼Œç»ˆæ­¢ ID</li><li>[COUNT count]ï¼Œè¯»å–çš„æ•°é‡</li></ul></blockquote><p>è¯¥å‘½ä»¤è¿”å›ä¸ç»™å®šçš„ ID èŒƒå›´ç›¸åŒ¹é…çš„æ¶ˆæ¯ã€‚ID çš„èŒƒå›´ç”± start å’Œ end å‚æ•°æ¥æŒ‡å®šã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; xrange message - + </span><br><span class="line">1) 1) <span class="string">&quot;1-0&quot;</span></span><br><span class="line">   2) 1) <span class="string">&quot;key1&quot;</span></span><br><span class="line">      2) <span class="string">&quot;value1&quot;</span></span><br><span class="line">      3) <span class="string">&quot;key2&quot;</span></span><br><span class="line">      4) <span class="string">&quot;value2&quot;</span></span><br><span class="line">2) 1) <span class="string">&quot;1-2&quot;</span></span><br><span class="line">   2) 1) <span class="string">&quot;key1&quot;</span></span><br><span class="line">      2) <span class="string">&quot;value1&quot;</span></span><br><span class="line">      3) <span class="string">&quot;key2&quot;</span></span><br><span class="line">      4) <span class="string">&quot;value2&quot;</span></span><br><span class="line">3) 1) <span class="string">&quot;1604476672762-0&quot;</span></span><br><span class="line">   2) 1) <span class="string">&quot;key3&quot;</span></span><br><span class="line">      2) <span class="string">&quot;value3&quot;</span></span><br><span class="line">4) 1) <span class="string">&quot;1604478059261-0&quot;</span></span><br><span class="line">   2) 1) <span class="string">&quot;keyblock&quot;</span></span><br><span class="line">      2) <span class="string">&quot;value&quot;</span></span><br><span class="line">5) 1) <span class="string">&quot;1604478070071-0&quot;</span></span><br><span class="line">   2) 1) <span class="string">&quot;keyblock2&quot;</span></span><br><span class="line">      2) <span class="string">&quot;value&quot;</span></span><br></pre></td></tr></table></figure><p>æ­¤å‘½ä»¤ç”±ä¸¤ä¸ªç‰¹æ®Šçš„ IDï¼Œä½¿ç”¨ - è¡¨ç¤ºæœ€å°çš„ ID å€¼ï¼Œä½¿ç”¨ + è¡¨ç¤ºæœ€å¤§çš„ ID å€¼ï¼Œå¯ä»¥æŸ¥è¯¢æ‰€æœ‰çš„æ¶ˆæ¯ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; xrange message 1 1</span><br><span class="line">1) 1) <span class="string">&quot;1-0&quot;</span></span><br><span class="line">   2) 1) <span class="string">&quot;key1&quot;</span></span><br><span class="line">      2) <span class="string">&quot;value1&quot;</span></span><br><span class="line">      3) <span class="string">&quot;key2&quot;</span></span><br><span class="line">      4) <span class="string">&quot;value2&quot;</span></span><br><span class="line">2) 1) <span class="string">&quot;1-2&quot;</span></span><br><span class="line">   2) 1) <span class="string">&quot;key1&quot;</span></span><br><span class="line">      2) <span class="string">&quot;value1&quot;</span></span><br><span class="line">      3) <span class="string">&quot;key2&quot;</span></span><br><span class="line">      4) <span class="string">&quot;value2&quot;</span></span><br></pre></td></tr></table></figure><p>å³ä½¿ ID ä¸å®Œæ•´ä¹Ÿå¯ä»¥ï¼Œåªè¾“å…¥ ID å€¼ä¼šè¾“å‡ºæ‰€æœ‰æ‹¥æœ‰ç›¸åŒ ID ä¸åŒåºåˆ—å·çš„æ¶ˆæ¯ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; xrange message - + count 3</span><br><span class="line">1) 1) <span class="string">&quot;1-0&quot;</span></span><br><span class="line">   2) 1) <span class="string">&quot;key1&quot;</span></span><br><span class="line">      2) <span class="string">&quot;value1&quot;</span></span><br><span class="line">      3) <span class="string">&quot;key2&quot;</span></span><br><span class="line">      4) <span class="string">&quot;value2&quot;</span></span><br><span class="line">2) 1) <span class="string">&quot;1-2&quot;</span></span><br><span class="line">   2) 1) <span class="string">&quot;key1&quot;</span></span><br><span class="line">      2) <span class="string">&quot;value1&quot;</span></span><br><span class="line">      3) <span class="string">&quot;key2&quot;</span></span><br><span class="line">      4) <span class="string">&quot;value2&quot;</span></span><br><span class="line">3) 1) <span class="string">&quot;1604476672762-0&quot;</span></span><br><span class="line">   2) 1) <span class="string">&quot;key3&quot;</span></span><br><span class="line">      2) <span class="string">&quot;value3&quot;</span></span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ count å‚æ•°å¯ä»¥é™åˆ¶è¾“å‡ºæ¶ˆæ¯çš„æ•°é‡ã€‚</p><p>é€šè¿‡ç®€å•çš„å¾ªç¯å¯ä»¥ä½¿ç”¨å°‘é‡å†…å­˜è¿­ä»£ä¸€ä¸ª key ä¸­æ‰€æœ‰çš„å€¼ï¼Œåªéœ€è¦å°†ä¸Šæ¬¡è¿­ä»£çš„ç»“æœä¸­æœ€å¤§çš„ ID ä½œä¸ºä¸‹ä¸€æ¬¡è¿­ä»£çš„èµ·å§‹ ID å³å¯ã€‚</p><h4 id="xrevrangeå‘½ä»¤"><a href="#xrevrangeå‘½ä»¤" class="headerlink" title="xrevrangeå‘½ä»¤"></a>xrevrangeå‘½ä»¤</h4><p>è¯­æ³•è¯´æ˜ï¼š</p><blockquote><p>XREVRANGE key end start [COUNT count]</p></blockquote><p>xrevrange å‘½ä»¤å’Œ xrange å‘½ä»¤è¯­æ³•å®Œå…¨ç›¸åŒï¼Œåªæœ‰ä¸€ç‚¹ä¸åŒï¼Œxrevrange æ˜¯åå‘éå†çš„ï¼Œä¸å†èµ˜è¿°ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; xrevrange message + -</span><br><span class="line">1) 1) <span class="string">&quot;1604478070071-0&quot;</span></span><br><span class="line">   2) 1) <span class="string">&quot;keyblock2&quot;</span></span><br><span class="line">      2) <span class="string">&quot;value&quot;</span></span><br><span class="line">2) 1) <span class="string">&quot;1604478059261-0&quot;</span></span><br><span class="line">   2) 1) <span class="string">&quot;keyblock&quot;</span></span><br><span class="line">      2) <span class="string">&quot;value&quot;</span></span><br><span class="line">3) 1) <span class="string">&quot;1604476672762-0&quot;</span></span><br><span class="line">   2) 1) <span class="string">&quot;key3&quot;</span></span><br><span class="line">      2) <span class="string">&quot;value3&quot;</span></span><br><span class="line">4) 1) <span class="string">&quot;1-2&quot;</span></span><br><span class="line">   2) 1) <span class="string">&quot;key1&quot;</span></span><br><span class="line">      2) <span class="string">&quot;value1&quot;</span></span><br><span class="line">      3) <span class="string">&quot;key2&quot;</span></span><br><span class="line">      4) <span class="string">&quot;value2&quot;</span></span><br><span class="line">5) 1) <span class="string">&quot;1-0&quot;</span></span><br><span class="line">   2) 1) <span class="string">&quot;key1&quot;</span></span><br><span class="line">      2) <span class="string">&quot;value1&quot;</span></span><br><span class="line">      3) <span class="string">&quot;key2&quot;</span></span><br><span class="line">      4) <span class="string">&quot;value2&quot;</span></span><br></pre></td></tr></table></figure><h4 id="xtrimå‘½ä»¤"><a href="#xtrimå‘½ä»¤" class="headerlink" title="xtrimå‘½ä»¤"></a>xtrimå‘½ä»¤</h4><p>è¯­æ³•è¯´æ˜ï¼š</p><blockquote><p>XTRIM key MAXLEN [~] count</p><ul><li>keyï¼ŒæŒ‡å®š stream çš„åå­—</li><li>maxlenï¼ŒæŒ‡å®šä¿®å‰ªç­–ç•¥ï¼Œå½“å‰åªå®ç°äº†è¿™ä¸€ç§</li><li>[~]ï¼Œæ˜¯å¦è¿‘ä¼¼ä¿®å‰ª</li><li>countï¼Œä¿®å‰ªåçš„æ•°é‡</li></ul></blockquote><p>xtrim å‘½ä»¤ä¼šä» ID å€¼æ¯”è¾ƒå°çš„æ¶ˆæ¯å¼€å§‹ä¸¢å¼ƒã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; xread streams message 0</span><br><span class="line">1) 1) <span class="string">&quot;message&quot;</span></span><br><span class="line">   2) 1) 1) <span class="string">&quot;1-0&quot;</span></span><br><span class="line">         2) 1) <span class="string">&quot;key1&quot;</span></span><br><span class="line">            2) <span class="string">&quot;value1&quot;</span></span><br><span class="line">            3) <span class="string">&quot;key2&quot;</span></span><br><span class="line">            4) <span class="string">&quot;value2&quot;</span></span><br><span class="line">      2) 1) <span class="string">&quot;1-2&quot;</span></span><br><span class="line">         2) 1) <span class="string">&quot;key1&quot;</span></span><br><span class="line">            2) <span class="string">&quot;value1&quot;</span></span><br><span class="line">            3) <span class="string">&quot;key2&quot;</span></span><br><span class="line">            4) <span class="string">&quot;value2&quot;</span></span><br><span class="line">      3) 1) <span class="string">&quot;1604476672762-0&quot;</span></span><br><span class="line">         2) 1) <span class="string">&quot;key3&quot;</span></span><br><span class="line">            2) <span class="string">&quot;value3&quot;</span></span><br><span class="line">      4) 1) <span class="string">&quot;1604478059261-0&quot;</span></span><br><span class="line">         2) 1) <span class="string">&quot;keyblock&quot;</span></span><br><span class="line">            2) <span class="string">&quot;value&quot;</span></span><br><span class="line">      5) 1) <span class="string">&quot;1604478070071-0&quot;</span></span><br><span class="line">         2) 1) <span class="string">&quot;keyblock2&quot;</span></span><br><span class="line">            2) <span class="string">&quot;value&quot;</span></span><br><span class="line">127.0.0.1:6379&gt; xtrim message maxlen 4</span><br><span class="line">(<span class="built_in">integer</span>) 1</span><br></pre></td></tr></table></figure><p>xtrim å‘½ä»¤çš„è¿”å›å€¼æ˜¯ä¿®å‰ªæ‰çš„ ID çš„æ•°é‡ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; xrange message - +</span><br><span class="line">1) 1) <span class="string">&quot;1-2&quot;</span></span><br><span class="line">   2) 1) <span class="string">&quot;key1&quot;</span></span><br><span class="line">      2) <span class="string">&quot;value1&quot;</span></span><br><span class="line">      3) <span class="string">&quot;key2&quot;</span></span><br><span class="line">      4) <span class="string">&quot;value2&quot;</span></span><br><span class="line">2) 1) <span class="string">&quot;1604476672762-0&quot;</span></span><br><span class="line">   2) 1) <span class="string">&quot;key3&quot;</span></span><br><span class="line">      2) <span class="string">&quot;value3&quot;</span></span><br><span class="line">3) 1) <span class="string">&quot;1604478059261-0&quot;</span></span><br><span class="line">   2) 1) <span class="string">&quot;keyblock&quot;</span></span><br><span class="line">      2) <span class="string">&quot;value&quot;</span></span><br><span class="line">4) 1) <span class="string">&quot;1604478070071-0&quot;</span></span><br><span class="line">   2) 1) <span class="string">&quot;keyblock2&quot;</span></span><br><span class="line">      2) <span class="string">&quot;value&quot;</span></span><br></pre></td></tr></table></figure><p>å†æ¬¡æŸ¥çœ‹å¯ä»¥çœ‹åˆ° key ä¸­çš„æ¶ˆæ¯æ•°é‡è¢«ä¿®å‰ªæ‰äº†ä¸€ä¸ªï¼Œåªå‰©ä¸‹äº†å››ä¸ªã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; xtrim message maxlen ~ 2</span><br><span class="line">(<span class="built_in">integer</span>) 0</span><br></pre></td></tr></table></figure><p>å¦‚æœä½¿ç”¨äº† ~ å‚æ•°ï¼Œåˆ™å¯èƒ½ä¸ä¼šè¿›è¡Œä¿®å‰ªã€‚æ­¤å‚æ•°å‘Šè¯‰ redis åœ¨èƒ½å¤Ÿåˆ é™¤æ•´ä¸ªå®èŠ‚ç‚¹æ—¶æ‰æ‰§è¡Œä¿®å‰ªï¼Œè¿™æ ·åšæ•ˆç‡æ›´é«˜ï¼Œå¹¶ä¸”å¯ä»¥ä¿è¯æ¶ˆæ¯çš„æ•°é‡ä¸å°äºæ‰€éœ€è¦çš„æ•°é‡ã€‚</p><h4 id="xdelå‘½ä»¤"><a href="#xdelå‘½ä»¤" class="headerlink" title="xdelå‘½ä»¤"></a>xdelå‘½ä»¤</h4><p>è¯­æ³•è¯´æ˜ï¼š</p><blockquote><p>XDEL key ID [ID â€¦]</p><ul><li>keyï¼ŒæŒ‡å®š stream çš„åå­—</li><li>ID [ID â€¦]ï¼Œéœ€è¦åˆ é™¤çš„ ID å€¼</li></ul></blockquote><p>xdel å‘½ä»¤ç”¨äºä» key ä¸­åˆ é™¤æŒ‡å®š ID çš„æ¶ˆæ¯ï¼Œå½“ ID ä¸å­˜åœ¨æ—¶ï¼Œè¿”å›çš„æ•°ç›®å¯èƒ½å’Œåˆ é™¤çš„æ•°ç›®ä¸ä¸€è‡´ã€‚åœ¨æ‰§è¡Œ xdel å‘½ä»¤æ—¶ï¼Œredis å¹¶ä¸ä¼šåœ¨å†…å­˜ä¸­åˆ é™¤å¯¹åº”çš„æ¶ˆæ¯ï¼Œè€Œåªä¼šæŠŠå®ƒæ ‡è®°ä¸ºåˆ é™¤ï¼Œåœ¨æ‰€æœ‰èŠ‚ç‚¹éƒ½è¢«åˆ é™¤ä¹‹åæ•´ä¸ªèŠ‚ç‚¹è¢«é”€æ¯ï¼Œå†…å­˜è¢«å›æ”¶ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; xdel message 1-2</span><br><span class="line">(<span class="built_in">integer</span>) 1</span><br><span class="line">127.0.0.1:6379&gt; xrange message - +</span><br><span class="line">1) 1) <span class="string">&quot;1604476672762-0&quot;</span></span><br><span class="line">   2) 1) <span class="string">&quot;key3&quot;</span></span><br><span class="line">      2) <span class="string">&quot;value3&quot;</span></span><br><span class="line">2) 1) <span class="string">&quot;1604478059261-0&quot;</span></span><br><span class="line">   2) 1) <span class="string">&quot;keyblock&quot;</span></span><br><span class="line">      2) <span class="string">&quot;value&quot;</span></span><br><span class="line">3) 1) <span class="string">&quot;1604478070071-0&quot;</span></span><br><span class="line">   2) 1) <span class="string">&quot;keyblock2&quot;</span></span><br><span class="line">      2) <span class="string">&quot;value&quot;</span></span><br></pre></td></tr></table></figure><p>åˆ é™¤äº† ID ä¸º 1-2 çš„æ¶ˆæ¯ã€‚</p><h4 id="xgroupå‘½ä»¤"><a href="#xgroupå‘½ä»¤" class="headerlink" title="xgroupå‘½ä»¤"></a>xgroupå‘½ä»¤</h4><p>è¯­æ³•è¯´æ˜ï¼š</p><blockquote><p>XGROUP [CREATE key groupname id-or-$] [SETID key groupname id-or-$] [DESTROY key groupname] [CREATECONSUMER key groupname consumername] [DELCONSUMER key groupname consumername]</p><ul><li>[CREATE key groupname id-or-$]ï¼Œåœ¨æŒ‡å®šçš„ key ä¸­åˆ›å»ºåˆ†ç»„ï¼Œå¹¶ä¸”æŒ‡å®šåˆ†ç»„è¯»å–æ¶ˆæ¯çš„èµ·ç‚¹ï¼Œå¦‚æœæŒ‡å®šäº†0ï¼Œåˆ†ç»„å°†å¯ä»¥è¯»å–æŒ‡å®š key çš„æ‰€æœ‰å†å²æ¶ˆæ¯ï¼Œå¦‚æœæŒ‡å®šäº† $ï¼Œåˆ†ç»„å°†å¯ä»¥è¯»å–æŒ‡å®š key çš„æ–°æ¶ˆæ¯ï¼Œå°†ä¸èƒ½è¯»å–å†å²æ¶ˆæ¯ã€‚ä¹Ÿå¯ä»¥æŒ‡å®šä»»æ„çš„å¼€å§‹ IDã€‚</li><li>[SETID key groupname id-or-$]ï¼Œé‡æ–°ç»™å·²å­˜åœ¨çš„åˆ†ç»„è®¾ç½®æ¶ˆæ¯è¯»å–çš„èµ·ç‚¹ã€‚ä¾‹å¦‚å°†èµ·ç‚¹è®¾ç½®ä¸º 0å°±å¯ä»¥é‡æ–°è¯»å–æ‰€æœ‰çš„å†å²æ¶ˆæ¯</li><li>[DESTROY key groupname]ï¼Œé”€æ¯æŒ‡å®š key ä¸­çš„ä¸€ä¸ªåˆ†ç»„</li><li>[CREATECONSUMER key groupname consumername]ï¼Œåœ¨æŒ‡å®šçš„ key å’ŒæŒ‡å®šçš„åˆ†ç»„ä¸­åˆ›å»ºä¸€ä¸ªæ¶ˆè´¹è€…ã€‚å½“æŸä¸ªå‘½ä»¤æåŠäº†æ–°çš„æ¶ˆè´¹è€…åç§°æ—¶ï¼Œä¹Ÿä¼šè‡ªåŠ¨åˆ›å»ºæ–°çš„æ¶ˆè´¹è€…ã€‚</li><li>[DELCONSUMER key groupname consumername]ï¼Œåœ¨æŒ‡å®šçš„ key å’ŒæŒ‡å®šçš„åˆ†ç»„ä¸­é”€æ¯ä¸€ä¸ªæ¶ˆè´¹è€…ã€‚</li></ul></blockquote><p>xgroup æ˜¯ä¸€ä¸ªå‘½ä»¤ç»„ï¼Œå¯ä»¥é€šè¿‡ä¸åŒçš„å…³é”®å­—æ‰§è¡Œä¸åŒçš„å‘½ä»¤ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; xgroup create message read_group $</span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379&gt; xreadgroup group read_group <span class="built_in">read</span> streams message &gt;</span><br><span class="line">(nil)</span><br><span class="line">127.0.0.1:6379&gt; xadd message * readkey readvalue</span><br><span class="line"><span class="string">&quot;1604494179721-0&quot;</span></span><br><span class="line">127.0.0.1:6379&gt; xreadgroup group read_group <span class="built_in">read</span> streams message &gt;</span><br><span class="line">1) 1) <span class="string">&quot;message&quot;</span></span><br><span class="line">   2) 1) 1) <span class="string">&quot;1604494179721-0&quot;</span></span><br><span class="line">         2) 1) <span class="string">&quot;readkey&quot;</span></span><br><span class="line">            2) <span class="string">&quot;readvalue&quot;</span></span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ creat å‘½ä»¤åˆ›å»ºä¸€ä¸ª read_group åˆ†ç»„ï¼ŒæŒ‡å®š ID çš„èµ·ç‚¹ä¸ºæœ€åä¸€ä¸ª IDï¼Œç›´æ¥è¯»å–çš„è¯æ˜¯ç©ºå€¼ï¼ˆxreadgroupå‘½ä»¤ä¸‹é¢è¯´ï¼‰ã€‚</p><p>ä½¿ç”¨ xadd å‘½ä»¤æ·»åŠ ä¸€æ¡æ–°çš„æ¶ˆæ¯ï¼Œå†æ¬¡è¯»å–å‘ç°å¯ä»¥æ­£å¸¸è¯»å–åˆ°æ–°åŠ å…¥çš„æ¶ˆæ¯ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; xgroup setid message read_group 0</span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379&gt; xreadgroup group read_group <span class="built_in">read</span> streams message &gt;</span><br><span class="line">1) 1) <span class="string">&quot;message&quot;</span></span><br><span class="line">   2) 1) 1) <span class="string">&quot;1604476672762-0&quot;</span></span><br><span class="line">         2) 1) <span class="string">&quot;key3&quot;</span></span><br><span class="line">            2) <span class="string">&quot;value3&quot;</span></span><br><span class="line">      2) 1) <span class="string">&quot;1604478059261-0&quot;</span></span><br><span class="line">         2) 1) <span class="string">&quot;keyblock&quot;</span></span><br><span class="line">            2) <span class="string">&quot;value&quot;</span></span><br><span class="line">      3) 1) <span class="string">&quot;1604478070071-0&quot;</span></span><br><span class="line">         2) 1) <span class="string">&quot;keyblock2&quot;</span></span><br><span class="line">            2) <span class="string">&quot;value&quot;</span></span><br><span class="line">      4) 1) <span class="string">&quot;1604494179721-0&quot;</span></span><br><span class="line">         2) 1) <span class="string">&quot;readkey&quot;</span></span><br><span class="line">            2) <span class="string">&quot;readvalue&quot;</span></span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ setid å‘½ä»¤é‡æ–°è®¾ç½®è¯»å– ID çš„èµ·ç‚¹ï¼Œå¯ä»¥è¯»å–åˆ°æ‰€æœ‰çš„å†å²æ¶ˆæ¯ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; xinfo <span class="built_in">groups</span> message</span><br><span class="line">1) 1) <span class="string">&quot;name&quot;</span></span><br><span class="line">   2) <span class="string">&quot;read_group&quot;</span></span><br><span class="line">   3) <span class="string">&quot;consumers&quot;</span></span><br><span class="line">   4) (<span class="built_in">integer</span>) 1</span><br><span class="line">   5) <span class="string">&quot;pending&quot;</span></span><br><span class="line">   6) (<span class="built_in">integer</span>) 4</span><br><span class="line">   7) <span class="string">&quot;last-delivered-id&quot;</span></span><br><span class="line">   8) <span class="string">&quot;1604494179721-0&quot;</span></span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ xinfo å‘½ä»¤æŸ¥è¯¢æ–°åˆ›å»ºçš„åˆ†ç»„ä¿¡æ¯ï¼Œå¯ä»¥çœ‹åˆ°åˆ†ç»„åå­—ï¼Œæ¶ˆè´¹è€…æ•°é‡ï¼Œæœ€ååŠ å…¥çš„æ¶ˆæ¯çš„ ID å€¼ï¼ˆxinfo å‘½ä»¤ä¸‹è¾¹è¯´ï¼‰ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; xinfo consumers message read_group</span><br><span class="line">1) 1) <span class="string">&quot;name&quot;</span></span><br><span class="line">   2) <span class="string">&quot;read&quot;</span></span><br><span class="line">   3) <span class="string">&quot;pending&quot;</span></span><br><span class="line">   4) (<span class="built_in">integer</span>) 4</span><br><span class="line">   5) <span class="string">&quot;idle&quot;</span></span><br><span class="line">   6) (<span class="built_in">integer</span>) 476449</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ xinfo å‘½ä»¤æŸ¥çœ‹æ–°åŠ å…¥çš„æ¶ˆè´¹è€…çš„ä¿¡æ¯ï¼Œå¯ä»¥çœ‹åˆ°æ¶ˆè´¹è€…åå­—ï¼Œå¤„äº pendingï¼ˆå¾…å¤„ç†ï¼‰ çŠ¶æ€çš„æ¶ˆæ¯æ•°é‡ï¼ˆpending çŠ¶æ€ä¸‹è¾¹è¯´ï¼‰ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; xgroup delconsumer message read_group <span class="built_in">read</span></span><br><span class="line">(<span class="built_in">integer</span>) 4</span><br><span class="line">127.0.0.1:6379&gt; xinfo consumers message read_group</span><br><span class="line">(empty array)</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ delconsumer å‘½ä»¤åˆ é™¤åˆ†ç»„ä¸­çš„æ¶ˆè´¹è€…ï¼Œä½¿ç”¨ xinfo å‘½ä»¤æŸ¥çœ‹åˆ†ç»„ä¸­çš„æ¶ˆè´¹è€…ï¼Œè¿”å›ä¸€ä¸ªç©ºæ•°ç»„ï¼Œè¯´æ˜åˆ é™¤æˆåŠŸã€‚delconsumer å‘½ä»¤çš„è¿”å›å€¼ä¸ºå½“å‰æ¶ˆè´¹è€…æ‰€æ‹¥æœ‰çš„ pendingï¼ˆå¾…å¤„ç†ï¼‰ çŠ¶æ€çš„æ¶ˆæ¯æ•°é‡ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; xgroup destroy message read_group</span><br><span class="line">(<span class="built_in">integer</span>) 1</span><br><span class="line">127.0.0.1:6379&gt; xinfo <span class="built_in">groups</span> message</span><br><span class="line">(empty array)</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ destroy å‘½ä»¤åˆ é™¤ message ä¸­çš„åˆ†ç»„ï¼Œä½¿ç”¨ xinfo å‘½ä»¤æŸ¥çœ‹ï¼Œè¿”å›ä¸€ä¸ªç©ºæ•°ç»„ï¼Œè¯´æ˜åˆ é™¤æˆåŠŸã€‚destroy å‘½ä»¤çš„è¿”å›å€¼ä¸ºåˆ é™¤æˆåŠŸçš„åˆ†ç»„æ•°é‡ã€‚<strong>æ³¨æ„ï¼šå³ä½¿ç”±æ´»è·ƒçš„æ¶ˆè´¹è€…å’Œ pendingï¼ˆå¾…å¤„ç†ï¼‰ çŠ¶æ€çš„æ¶ˆæ¯ï¼Œåˆ†ç»„ä»ç„¶ä¼šè¢«åˆ é™¤ï¼Œéœ€è¦ç¡®ä¿åœ¨éœ€è¦æ—¶æ‰æ‰§è¡Œæ­¤å‘½ä»¤ã€‚</strong></p><h4 id="xinfoå‘½ä»¤"><a href="#xinfoå‘½ä»¤" class="headerlink" title="xinfoå‘½ä»¤"></a>xinfoå‘½ä»¤</h4><p>è¯­æ³•è¯´æ˜ï¼š</p><blockquote><p>XINFO [CONSUMERS key groupname] [GROUPS key] [STREAM key] [HELP]</p><ul><li>[CONSUMERS key groupname]ï¼ŒæŸ¥è¯¢æŒ‡å®š key å’ŒæŒ‡å®šåˆ†ç»„ä¸­çš„æ¶ˆè´¹è€…ä¿¡æ¯ã€‚</li><li>[GROUPS key]ï¼ŒæŸ¥è¯¢æŒ‡å®š key ä¸­çš„åˆ†ç»„ä¿¡æ¯ã€‚</li><li>[STREAM key]ï¼ŒæŸ¥è¯¢æŒ‡å®š key ä¸­æ‰€æœ‰çš„ä¿¡æ¯ã€‚</li></ul></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; xinfo consumers message read_group</span><br><span class="line">1) 1) <span class="string">&quot;name&quot;</span></span><br><span class="line">   2) <span class="string">&quot;read&quot;</span></span><br><span class="line">   3) <span class="string">&quot;pending&quot;</span></span><br><span class="line">   4) (<span class="built_in">integer</span>) 4</span><br><span class="line">   5) <span class="string">&quot;idle&quot;</span></span><br><span class="line">   6) (<span class="built_in">integer</span>) 206796</span><br></pre></td></tr></table></figure><p>è¯»å– message çš„ read_group åˆ†ç»„ä¸­æ‰€æœ‰çš„æ¶ˆè´¹è€…ä¿¡æ¯ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; xinfo <span class="built_in">groups</span> message</span><br><span class="line">1) 1) <span class="string">&quot;name&quot;</span></span><br><span class="line">   2) <span class="string">&quot;read_group&quot;</span></span><br><span class="line">   3) <span class="string">&quot;consumers&quot;</span></span><br><span class="line">   4) (<span class="built_in">integer</span>) 1</span><br><span class="line">   5) <span class="string">&quot;pending&quot;</span></span><br><span class="line">   6) (<span class="built_in">integer</span>) 4</span><br><span class="line">   7) <span class="string">&quot;last-delivered-id&quot;</span></span><br><span class="line">   8) <span class="string">&quot;1604494179721-0&quot;</span></span><br></pre></td></tr></table></figure><p>è¯»å– message ä¸­æ‰€æœ‰çš„åˆ†ç»„ä¿¡æ¯ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; xinfo stream message</span><br><span class="line"> 1) <span class="string">&quot;length&quot;</span></span><br><span class="line"> 2) (<span class="built_in">integer</span>) 4</span><br><span class="line"> 3) <span class="string">&quot;radix-tree-keys&quot;</span></span><br><span class="line"> 4) (<span class="built_in">integer</span>) 1</span><br><span class="line"> 5) <span class="string">&quot;radix-tree-nodes&quot;</span></span><br><span class="line"> 6) (<span class="built_in">integer</span>) 2</span><br><span class="line"> 7) <span class="string">&quot;last-generated-id&quot;</span></span><br><span class="line"> 8) <span class="string">&quot;1604494179721-0&quot;</span></span><br><span class="line"> 9) <span class="string">&quot;groups&quot;</span></span><br><span class="line">10) (<span class="built_in">integer</span>) 1</span><br><span class="line">11) <span class="string">&quot;first-entry&quot;</span></span><br><span class="line">12) 1) <span class="string">&quot;1604476672762-0&quot;</span></span><br><span class="line">    2) 1) <span class="string">&quot;key3&quot;</span></span><br><span class="line">       2) <span class="string">&quot;value3&quot;</span></span><br><span class="line">13) <span class="string">&quot;last-entry&quot;</span></span><br><span class="line">14) 1) <span class="string">&quot;1604494179721-0&quot;</span></span><br><span class="line">    2) 1) <span class="string">&quot;readkey&quot;</span></span><br><span class="line">       2) <span class="string">&quot;readvalue&quot;</span></span><br></pre></td></tr></table></figure><p>è¯»å– message æ‰€æœ‰çš„ä¿¡æ¯ã€‚</p><h4 id="xpendingå‘½ä»¤"><a href="#xpendingå‘½ä»¤" class="headerlink" title="xpendingå‘½ä»¤"></a>xpendingå‘½ä»¤</h4><p>è¯­æ³•è¯´æ˜ï¼š</p><blockquote><p>XPENDING key group [start end count] [consumer]</p><ul><li>keyï¼ŒæŒ‡å®šçš„ key</li><li>groupï¼ŒæŒ‡å®šçš„åˆ†ç»„</li><li>[start end count]ï¼Œèµ·å§‹ ID å’Œç»“æŸ ID è¿˜æœ‰æ•°é‡</li><li>consumerï¼Œæ¶ˆè´¹è€…åå­—</li></ul></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; xpending message readgroup </span><br><span class="line">1) (<span class="built_in">integer</span>) 2</span><br><span class="line">2) <span class="string">&quot;1604496633846-0&quot;</span></span><br><span class="line">3) <span class="string">&quot;1604496640734-0&quot;</span></span><br><span class="line">4) 1) 1) <span class="string">&quot;read&quot;</span></span><br><span class="line">      2) <span class="string">&quot;2&quot;</span></span><br></pre></td></tr></table></figure><p>xpending å‘½ä»¤å¯ä»¥æŸ¥çœ‹å¯¹åº”åˆ†ç»„ä¸­æœªç¡®è®¤çš„æ¶ˆæ¯çš„æ•°é‡å’Œå…¶æ‰€å¯¹åº”çš„æ¶ˆè´¹è€…çš„åå­—è¿˜æœ‰èµ·å§‹å’Œç»ˆæ­¢ IDã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; xpending message readgroup - + 10 <span class="built_in">read</span></span><br><span class="line">1) 1) <span class="string">&quot;1604496633846-0&quot;</span></span><br><span class="line">   2) <span class="string">&quot;read&quot;</span></span><br><span class="line">   3) (<span class="built_in">integer</span>) 513557</span><br><span class="line">   4) (<span class="built_in">integer</span>) 4</span><br><span class="line">2) 1) <span class="string">&quot;1604496640734-0&quot;</span></span><br><span class="line">   2) <span class="string">&quot;read&quot;</span></span><br><span class="line">   3) (<span class="built_in">integer</span>) 482927</span><br><span class="line">   4) (<span class="built_in">integer</span>) 1</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ xpending å‘½ä»¤å¯ä»¥æŸ¥çœ‹å¤„äºæœªç¡®è®¤çŠ¶æ€çš„æ¶ˆæ¯çš„å…·ä½“ä¿¡æ¯ã€‚</p><h4 id="xreadgroupå‘½ä»¤"><a href="#xreadgroupå‘½ä»¤" class="headerlink" title="xreadgroupå‘½ä»¤"></a>xreadgroupå‘½ä»¤</h4><p>è¯­æ³•è¯´æ˜ï¼š</p><blockquote><p>XREADGROUP GROUP group consumer [COUNT count] [BLOCK milliseconds] [NOACK] STREAMS key [key â€¦] ID [ID â€¦]</p><ul><li>GROUPï¼Œå›ºå®š</li><li>groupï¼Œåˆ†ç»„å</li><li>consumerï¼Œæ¶ˆè´¹è€…å</li><li>[COUNT count]ï¼Œæ¯æ¬¡è·å–æ¶ˆæ¯çš„æ•°é‡</li><li>[BLOCK milliseconds]ï¼Œé˜»å¡æ¨¡å¼å’Œè¶…æ—¶æ—¶é—´</li><li>[NOACK]ï¼Œä¸éœ€è¦ç¡®è®¤æ¶ˆæ¯ï¼Œé€‚ç”¨äºä¸æ€ä¹ˆé‡è¦çš„å¯ä»¥ä¸¢å¤±çš„æ¶ˆæ¯</li><li>STREAMSï¼Œå›ºå®š</li><li>key [key â€¦]ï¼ŒæŒ‡å®šçš„ key</li><li>ID [ID â€¦]ï¼ŒæŒ‡å®šçš„æ¶ˆæ¯ IDï¼Œ&gt; æŒ‡å®šè¯»å–æ‰€æœ‰æœªæ¶ˆè´¹çš„æ¶ˆæ¯ï¼Œå…¶ä»–å€¼æŒ‡å®šè¢«æŒ‚èµ·çš„æ¶ˆæ¯</li></ul></blockquote><p>xreadgroup å‘½ä»¤é€šè¿‡ä¸æ¶ˆè´¹è€…ç»„å’Œæ¶ˆè´¹è€…çš„ç»“åˆå¯ä»¥åšåˆ°æ¶ˆæ¯çš„è¯»å–ä¸ç¡®è®¤ï¼Œåœ¨ xread çš„åŸºç¡€ä¸Šç»†åŒ–äº†è¯»å–æ¶ˆæ¯æ“ä½œã€‚</p><p>ä»è¯­æ³•ä¸Šæ¥çœ‹ï¼Œxreadgroup å’Œ xread å‘½ä»¤å‡ ä¹ç›¸åŒï¼Œxreadgroup å‘½ä»¤å¤šäº†ä¸€ä¸ªå¼ºåˆ¶æ€§çš„å‚æ•°ï¼š<code>GROUP groupname consumername</code>ã€‚</p><p>å½“å¤šä¸ªæ¶ˆè´¹è€…åŒæ—¶æ¶ˆè´¹åŒä¸€ä¸ªæ¶ˆæ¯é˜Ÿåˆ—æ—¶ï¼Œä¼šé‡å¤æ¶ˆè´¹ç›¸åŒçš„æ¶ˆæ¯ï¼Œæ¯æ¡æ¶ˆæ¯éƒ½ä¼šè¢«æ¯ä¸ªæ¶ˆè´¹è€…æ¶ˆè´¹ä¸€éã€‚ä½†æ˜¯å¦‚æœæƒ³è¦å¤šä¸ªæ¶ˆè´¹è€…åä½œæ¶ˆè´¹åŒä¸€ä¸ªæ¶ˆæ¯é˜Ÿåˆ—æ—¶ï¼Œå°±éœ€è¦ç”¨åˆ°æ¶ˆè´¹è€…ç»„ã€‚</p><p>ä¾‹å¦‚æ¨é€ç³»ç»Ÿï¼Œè‚¯å®šæ˜¯ä¸å¯ä»¥é‡å¤æ¨é€çš„ï¼Œä¹Ÿå°±æ˜¯è¯´æ¯æ¡æ¶ˆæ¯åªå¯ä»¥è¢«æ¶ˆè´¹ä¸€éï¼Œè¿™æ—¶å°±å¯ä»¥ä½¿ç”¨å¤šä¸ªæ¶ˆè´¹è€…æ¥æ¶ˆè´¹åŒä¸€ä¸ªæ¨é€é˜Ÿåˆ—ï¼Œé™ä½æ¯ä¸ªæ¶ˆè´¹è€…ç³»ç»Ÿçš„å‹åŠ›ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; flushdb</span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379&gt; xadd message * key1 value1</span><br><span class="line"><span class="string">&quot;1604496633846-0&quot;</span></span><br><span class="line">127.0.0.1:6379&gt; xadd message * key2 value2</span><br><span class="line"><span class="string">&quot;1604496640734-0&quot;</span></span><br><span class="line">127.0.0.1:6379&gt; xgroup create message readgroup 0</span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379&gt; xadd message * key3 value3</span><br><span class="line"><span class="string">&quot;1604496696501-0&quot;</span></span><br><span class="line">127.0.0.1:6379&gt; xadd message * key4 value4</span><br><span class="line"><span class="string">&quot;1604496704823-0&quot;</span></span><br><span class="line">127.0.0.1:6379&gt; xreadgroup group readgroup <span class="built_in">read</span> count 1 streams message &gt;</span><br><span class="line">1) 1) <span class="string">&quot;message&quot;</span></span><br><span class="line">   2) 1) 1) <span class="string">&quot;1604496633846-0&quot;</span></span><br><span class="line">         2) 1) <span class="string">&quot;key1&quot;</span></span><br><span class="line">            2) <span class="string">&quot;value1&quot;</span></span><br><span class="line">127.0.0.1:6379&gt; xreadgroup group readgroup <span class="built_in">read</span> count 1 streams message &gt;</span><br><span class="line">1) 1) <span class="string">&quot;message&quot;</span></span><br><span class="line">   2) 1) 1) <span class="string">&quot;1604496640734-0&quot;</span></span><br><span class="line">         2) 1) <span class="string">&quot;key2&quot;</span></span><br><span class="line">            2) <span class="string">&quot;value2&quot;</span></span><br></pre></td></tr></table></figure><p>ä»å¤´å¼€å§‹ï¼Œæ¸…ç©ºæ•°æ®åº“ï¼Œé‡æ–°ç»™ message æ·»åŠ æ¶ˆæ¯ï¼Œåˆ›å»ºåˆ†ç»„ï¼Œä½¿ç”¨ readgroup å‘½ä»¤è¯»å–æœ€æ–°çš„æ¶ˆæ¯ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; xinfo consumers message readgroup</span><br><span class="line">1) 1) <span class="string">&quot;name&quot;</span></span><br><span class="line">   2) <span class="string">&quot;read&quot;</span></span><br><span class="line">   3) <span class="string">&quot;pending&quot;</span></span><br><span class="line">   4) (<span class="built_in">integer</span>) 2</span><br><span class="line">   5) <span class="string">&quot;idle&quot;</span></span><br><span class="line">   6) (<span class="built_in">integer</span>) 53146</span><br><span class="line">127.0.0.1:6379&gt; xpending message readgroup - + 10 <span class="built_in">read</span></span><br><span class="line">1) 1) <span class="string">&quot;1604496633846-0&quot;</span></span><br><span class="line">   2) <span class="string">&quot;read&quot;</span></span><br><span class="line">   3) (<span class="built_in">integer</span>) 513557</span><br><span class="line">   4) (<span class="built_in">integer</span>) 4</span><br><span class="line">2) 1) <span class="string">&quot;1604496640734-0&quot;</span></span><br><span class="line">   2) <span class="string">&quot;read&quot;</span></span><br><span class="line">   3) (<span class="built_in">integer</span>) 482927</span><br><span class="line">   4) (<span class="built_in">integer</span>) 1</span><br></pre></td></tr></table></figure><p>è¯»å–äº†ä¸¤æ¡æ¶ˆæ¯ï¼Œä½¿ç”¨ xinfo å‘½ä»¤æŸ¥çœ‹ï¼Œå¯ä»¥çœ‹åˆ°æœ‰ä¸¤æ¡æ¶ˆæ¯å¤„äº pendingï¼ˆå¾…å¤„ç†ï¼‰çŠ¶æ€ï¼Œä½¿ç”¨ xpending å‘½ä»¤å¯ä»¥æŸ¥çœ‹å¤„äºæœªç¡®è®¤çŠ¶æ€çš„æ¶ˆæ¯çš„å…·ä½“ä¿¡æ¯ã€‚</p><h4 id="xackå‘½ä»¤"><a href="#xackå‘½ä»¤" class="headerlink" title="xackå‘½ä»¤"></a>xackå‘½ä»¤</h4><p>è¯­æ³•è¯´æ˜ï¼š</p><blockquote><p>XACK key group ID [ID â€¦]</p><ul><li>keyï¼ŒæŒ‡å®šçš„ key</li><li>groupï¼ŒæŒ‡å®šçš„ group</li><li>D [ID â€¦]ï¼Œéœ€è¦ç¡®è®¤çš„æ¶ˆæ¯çš„ ID</li></ul></blockquote><p>xack å‘½ä»¤ä» pending é˜Ÿåˆ—ä¸­åˆ é™¤æŒ‚èµ·çš„æ¶ˆæ¯ï¼Œä¹Ÿå°±æ˜¯ç¡®è®¤ä¹‹å‰æœªç¡®è®¤çš„æ¶ˆæ¯ã€‚å½“ä½¿ç”¨ xreadgroup å‘½ä»¤è¯»å–æ¶ˆæ¯æ—¶ï¼Œæ¶ˆæ¯åŒæ—¶è¢«å­˜å‚¨åˆ° PEL ä¸­ï¼Œç­‰å¾…è¢«ç¡®è®¤ï¼Œè°ƒç”¨ xack å‘½ä»¤å¯ä»¥ä» PEL ä¸­åˆ é™¤æŒ‚èµ·çš„æ¶ˆæ¯å¹¶ä¸”é‡Šæ”¾å†…å­˜ï¼Œç¡®ä¿ä¸ä¸¢å¤±æ¶ˆæ¯ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; xack message readgroup 1604496633846-0</span><br><span class="line">(<span class="built_in">integer</span>) 1</span><br><span class="line">127.0.0.1:6379&gt; xpending message readgroup </span><br><span class="line">1) (<span class="built_in">integer</span>) 1</span><br><span class="line">2) <span class="string">&quot;1604496640734-0&quot;</span></span><br><span class="line">3) <span class="string">&quot;1604496640734-0&quot;</span></span><br><span class="line">4) 1) 1) <span class="string">&quot;read&quot;</span></span><br><span class="line">      2) <span class="string">&quot;1&quot;</span></span><br><span class="line">127.0.0.1:6379&gt; xinfo consumers message readgroup</span><br><span class="line">1) 1) <span class="string">&quot;name&quot;</span></span><br><span class="line">   2) <span class="string">&quot;read&quot;</span></span><br><span class="line">   3) <span class="string">&quot;pending&quot;</span></span><br><span class="line">   4) (<span class="built_in">integer</span>) 1</span><br><span class="line">   5) <span class="string">&quot;idle&quot;</span></span><br><span class="line">   6) (<span class="built_in">integer</span>) 418489</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ xack å‘½ä»¤ç¡®è®¤ä¸€æ¡æ¶ˆæ¯ï¼Œå†æ¬¡ä½¿ç”¨ xpending å‘½ä»¤æŸ¥çœ‹æœªç¡®è®¤æ¶ˆæ¯çš„æ•°é‡ï¼Œåªå‰©ä¸€æ¡æœªç¡®è®¤æ¶ˆæ¯ï¼Œä½¿ç”¨ xinfo å‘½ä»¤æŸ¥çœ‹å¤„äº pending çŠ¶æ€çš„æ¶ˆæ¯æ•°é‡ä¹Ÿä¸º 1ï¼Œç¡®è®¤æ¶ˆæ¯æˆåŠŸã€‚</p><h4 id="xclaimå‘½ä»¤"><a href="#xclaimå‘½ä»¤" class="headerlink" title="xclaimå‘½ä»¤"></a>xclaimå‘½ä»¤</h4><p>è¯­æ³•è¯´æ˜ï¼š</p><blockquote><p>XCLAIM key group consumer min-idle-time ID [ID â€¦] [IDLE ms] [TIME ms-unix-time] [RETRYCOUNT count] [FORCE] [JUSTID]</p><ul><li>keyï¼ŒæŒ‡å®šçš„ key</li><li>groupï¼ŒæŒ‡å®šçš„åˆ†ç»„</li><li>consumerï¼ŒæŒ‡å®šçš„æ¶ˆè´¹è€…</li><li>min-idle-timeï¼ŒæŒ‡å®šæ¶ˆæ¯æœ€å°ç©ºé—²æ•°ï¼ŒæŒ‡å®šç©ºé—²äº†å¤šä¹…çš„æ¶ˆæ¯ä¼šè¢«é€‰ä¸­</li><li>ID [ID â€¦]ï¼Œæ¶ˆæ¯çš„ ID</li><li>[IDLE ms]ï¼Œè®¾ç½®æ¶ˆæ¯çš„ç©ºé—²æ—¶é—´ï¼Œå¦‚æœä¸æä¾›ï¼Œé»˜è®¤ä¸º 0</li><li>[TIME ms-unix-time]ï¼Œå’ŒIDLEç›¸åŒï¼Œunix æ—¶é—´æˆ³</li><li>RETRYCOUNTï¼Œè®¾ç½®é‡è¯•æ¬¡æ•°ï¼Œé€šå¸¸ xclaim ä¸ä¼šæ”¹å˜è¿™ä¸ªå€¼ï¼Œå®ƒé€šå¸¸ç”¨äº xpending å‘½ä»¤ï¼Œç”¨æ¥å‘ç°ä¸€äº›é•¿æ—¶é—´æœªè¢«å¤„ç†çš„æ¶ˆæ¯ã€‚</li><li>FORCEï¼Œåœ¨ PEL ä¸­åˆ›å»ºå¾…å¤„ç†æ¶ˆæ¯ï¼Œå³ä½¿æŒ‡å®šçš„ ID å°šæœªåˆ†é…ç»™å®¢æˆ·ç«¯çš„PELã€‚</li><li>JUSTIDï¼Œåªè¿”å›è®¤é¢†çš„æ¶ˆæ¯ ID æ•°ç»„ï¼Œä¸è¿”å›å®é™…æ¶ˆæ¯ã€‚</li></ul></blockquote><p>xclaim å‘½ä»¤ç”¨äºæ›´æ”¹æœªç¡®è®¤æ¶ˆæ¯çš„æ‰€æœ‰æƒï¼Œå¦‚æœæœ‰æ¶ˆè´¹è€…åœ¨è¯»å–äº†æ¶ˆæ¯ä¹‹åæœªå¤„ç†å®Œæˆå°±æŒ‚æ‰äº†ï¼Œé‚£ä¹ˆæ¶ˆæ¯ä¼šä¸€ç›´åœ¨ pending é˜Ÿåˆ—ä¸­ï¼Œå ç”¨å†…å­˜ï¼Œè¿™æ—¶éœ€è¦ä½¿ç”¨ xclaim å‘½ä»¤æ›´æ”¹æ­¤æ¡æ¶ˆæ¯çš„æ‰€å±è€…ï¼Œè®©å…¶ä»–çš„æ¶ˆè´¹è€…å»æ¶ˆè´¹è¿™æ¡æ¶ˆæ¯ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; xreadgroup group readgroup read2 count 1 streams message &gt;</span><br><span class="line">1) 1) <span class="string">&quot;message&quot;</span></span><br><span class="line">   2) 1) 1) <span class="string">&quot;1604496696501-0&quot;</span></span><br><span class="line">         2) 1) <span class="string">&quot;key3&quot;</span></span><br><span class="line">            2) <span class="string">&quot;value3&quot;</span></span><br><span class="line">127.0.0.1:6379&gt; xack message readgroup 1604496696501-0</span><br><span class="line">(<span class="built_in">integer</span>) 1</span><br><span class="line">127.0.0.1:6379&gt; xpending message readgroup - + 10 <span class="built_in">read</span></span><br><span class="line">1) 1) <span class="string">&quot;1604496640734-0&quot;</span></span><br><span class="line">   2) <span class="string">&quot;read&quot;</span></span><br><span class="line">   3) (<span class="built_in">integer</span>) 1258517</span><br><span class="line">   4) (<span class="built_in">integer</span>) 2</span><br><span class="line">127.0.0.1:6379&gt; xpending message readgroup - + 10 read2</span><br><span class="line">(empty array)</span><br></pre></td></tr></table></figure><p>æ–°åˆ›å»ºä¸€ä¸ªæ¶ˆè´¹è€…ï¼Œè¯»å–ä¸€æ¡æ¶ˆæ¯ï¼Œç„¶åå°†æ¶ˆæ¯ç¡®è®¤æ‰ï¼ŒæŸ¥çœ‹ä¸¤ä¸ªæ¶ˆè´¹è€…ä¸­æœªç¡®è®¤æ¶ˆæ¯çš„æ•°é‡ï¼Œread æœ‰ä¸€æ¡ï¼Œread2 æ²¡æœ‰æœªç¡®è®¤çš„æ¶ˆæ¯ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; xclaim message readgroup read2 0 1604496640734-0</span><br><span class="line">1) 1) <span class="string">&quot;1604496640734-0&quot;</span></span><br><span class="line">   2) 1) <span class="string">&quot;key2&quot;</span></span><br><span class="line">      2) <span class="string">&quot;value2&quot;</span></span><br><span class="line">127.0.0.1:6379&gt; xpending message readgroup - + 10 read2</span><br><span class="line">1) 1) <span class="string">&quot;1604496640734-0&quot;</span></span><br><span class="line">   2) <span class="string">&quot;read2&quot;</span></span><br><span class="line">   3) (<span class="built_in">integer</span>) 3724</span><br><span class="line">   4) (<span class="built_in">integer</span>) 4</span><br><span class="line">127.0.0.1:6379&gt; xpending message readgroup - + 10 <span class="built_in">read</span></span><br><span class="line">(empty array)</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ xclaim å‘½ä»¤å°†æ¶ˆæ¯æ‰€æœ‰æƒè½¬ç§»ç»™ read2 è¿™ä¸ªæ¶ˆè´¹è€…ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œæ¶ˆè´¹è€… read2 çš„ pending é˜Ÿåˆ—ä¸­æœ‰ä¸€æ¡æœªç¡®è®¤æ¶ˆæ¯ï¼Œæ¶ˆè´¹è€… read çš„ pending é˜Ÿåˆ—ä¸­å·²ç»æ²¡æœ‰æ¶ˆæ¯äº†ã€‚</p><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>ç¬¬ä¸€æ¬¡ä½¿ç”¨ redis åšæ¶ˆæ¯é˜Ÿåˆ—ï¼Œä½“éªŒä¸Šæ¥è¯´è¿˜æ˜¯å¾ˆä¸é”™çš„ï¼Œç¬¬ä¸€æ¬¡åšè¿™ç§å‘½ä»¤æ€»ç»“ï¼Œä»¥ä¸Šå†…å®¹å¦‚æœ‰é—æ¼å’Œé”™è¯¯ï¼Œè¯·å¤§å®¶æŒ‡æ­£ã€‚</p><h3 id="å‚è€ƒé“¾æ¥"><a href="#å‚è€ƒé“¾æ¥" class="headerlink" title="å‚è€ƒé“¾æ¥"></a>å‚è€ƒé“¾æ¥</h3><p><a target="_blank" rel="noopener" href="https://redis.io/commands#stream">https://redis.io/commands#stream</a></p><blockquote><p>æœ¬æ–‡ç« é¦–å‘äºä¸ªäººåšå®¢ <strong>LLLibra146â€™s blog</strong><br><strong>æœ¬æ–‡ä½œè€…</strong>ï¼šLLLibra146<br><strong>ç‰ˆæƒå£°æ˜</strong>ï¼šæœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ Â© <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-nd/4.0/deed.zh">BY-NC-ND</a> è®¸å¯åè®®ã€‚éå•†ç”¨è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼ä¸¥ç¦å•†ä¸šè½¬è½½ï¼<br><strong>æœ¬æ–‡é“¾æ¥</strong>ï¼š<a href="https://blog.d77.xyz/archives/d1007463.html">https://blog.d77.xyz/archives/d1007463.html</a></p></blockquote></div><footer class="post-footer"><div class="post-tags"><a href="/tags/redis/" rel="tag"><i class="fa fa-tag"></i> redis</a> <a href="/tags/stream%E7%B1%BB%E5%9E%8B/" rel="tag"><i class="fa fa-tag"></i> streamç±»å‹</a></div><div class="post-nav"><div class="post-nav-item"><a href="/archives/67ddca4b.html" rel="prev" title="Scrapyä¸­process_requestè¿”å›requestå’ŒNoneçš„åŒºåˆ«"><i class="fa fa-chevron-left"></i> Scrapyä¸­process_requestè¿”å›requestå’ŒNoneçš„åŒºåˆ«</a></div><div class="post-nav-item"><a href="/archives/a730105d.html" rel="next" title="åŸºäºredisçš„streamå®ç°ç®€å•çš„websocketæ¨é€">åŸºäºredisçš„streamå®ç°ç®€å•çš„websocketæ¨é€ <i class="fa fa-chevron-right"></i></a></div></div></footer></article></div><div class="comments" id="disqus_thread"><noscript>Please enable JavaScript to view the comments powered by Disqus.</noscript></div></div></main><footer class="footer"><div class="footer-inner"><div class="beian"><a href="https://beian.miit.gov.cn/" rel="noopener" target="_blank">æ´¥ICPå¤‡15003765å·</a></div><div class="copyright">&copy; 2019 â€“ <span itemprop="copyrightYear">2023</span> <span class="with-love"><i class="fa fa-heart"></i> </span><span class="author" itemprop="copyrightHolder">LLLibra146</span></div><div class="powered-by">ç”± <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/pisces/" rel="noopener" target="_blank">NexT.Pisces</a> å¼ºåŠ›é©±åŠ¨</div></div></footer><div class="back-to-top" role="button" aria-label="è¿”å›é¡¶éƒ¨"><i class="fa fa-arrow-up fa-lg"></i> <span>0%</span></div><a href="https://github.com/libra146" class="github-corner" title="åœ¨ GitHub ä¸Šå…³æ³¨æˆ‘" aria-label="åœ¨ GitHub ä¸Šå…³æ³¨æˆ‘" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><noscript><div class="noscript-warning">Theme NexT works best with JavaScript enabled</div></noscript><script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/next-theme-pjax/0.6.0/pjax.min.js" integrity="sha256-vxLn1tSKWD4dqbMRyv940UYw4sXgMtYcK6reefzZrao=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.4/jquery.min.js" integrity="sha256-oP6HI9z1XaZNBrJURtCoUT5SUnxFr8s3BzRl+cbzUq8=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js" integrity="sha256-yt2kYMy0w8AbtF89WXb2P1rfjcP/HTHLT7097U8Y5b8=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/lozad.js/1.16.0/lozad.min.js" integrity="sha256-mOFREFhqmHeQbXpK2lp4nA3qooVgACfh88fpJftLBbc=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/pangu/4.0.7/pangu.min.js" integrity="sha256-j+yj56cdEY2CwkVtGyz18fNybFGpMGJ8JxG3GSyO2+I=" crossorigin="anonymous"></script><script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/next-boot.js"></script><script src="/js/pjax.js"></script><script src="/js/third-party/fancybox.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/quicklink/2.3.0/quicklink.umd.js" integrity="sha256-yvJQOINiH9fWemHn0vCA5lsHWJaHs6/ZmO+1Ft04SvM=" crossorigin="anonymous"></script><script class="next-config" data-name="quicklink" type="application/json">{"enable":true,"home":false,"archive":false,"delay":true,"timeout":3000,"priority":true,"url":"https://blog.d77.xyz/archives/d1007463.html"}</script><script src="/js/third-party/quicklink.js"></script><script class="next-config" data-name="disqus" type="application/json">{"enable":true,"shortname":"blog-spbape1g16","count":false,"i18n":{"disqus":"disqus"}}</script><script src="/js/third-party/comments/disqus.js"></script></body></html>